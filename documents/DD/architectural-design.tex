\chapter{Architectural design}

\section{Overview}

In the S\&C application, five high-level components can be distinguished: the web server, the application server, the DBMS, the email service, and the browser interface.

The web server main objective is to deliver web pages upon user requests.
The application server is the main component of the system, as it contains every piece of business logic required to satisfy the goals specified in the RASD document.
The role of the DBMS is the usual, which is providing interaction with a database by executing command operations.
The email service is used to validate the user account at sign up time, since the verification link is sent via email.
Lastly, the browser interface is the application, in the form of web pages, that is reachable by the user from a browser.

\section{Components view}

\htitle{Browser interface}
This is the the web application used by the client, which is reachable by any browser.
The full range of operations that it provides can only be used after the authentication process, performed by the authentication service, results successful.
It allows both students and companies to perform a certain set of actions based on the type of user.

\htitle{Web server}
This is the intermediary between the frontend and the backend.
Its purpose is to manage the browser UI pages independently and transparently from the point of view of the other servers components.
The web server main tasks are the static resources delivery and the web pages content retrieval and forwarding.
After receiving an HTTP request, the web server retrieves from the application server the data needed to fill the corresponding HTML template, which are then both returned to the user, along with the static style assets.

\htitle{Authentication service}
This component provides the set of procedures required to handle the authentication of a user into the system.
It manages the log in and sign up phases.

\htitle{Email service}
The main goal of this component is to implement all the procedures that the server requires in order to send email messages to the user.
Mainly, this component allows the authentication service to send a verification email when handling the sign up of a user.

\htitle{Notification service}
The purpose of this component is to collect and manage all the notifications that a user receives.
It defines the notification types and allows other components to easily send them.

\htitle{Query service}
This service acts as a mediator between the server components and the DBMS.
It uses the DBMS APIs to implement a set of functions which have the sole purpose of manipulating the database or retrieving information from it.

\htitle{Recommendation service}
This service provides the algorithms necessary for finding suitable advertisements and candidates.
These are called when the user opens the feed in the home page, or when looking for strong matches that are to be notified.

\htitle{Suggestion service}
This service provides the algorithms necessary for evaluating the user profiles, in order to propose enhancements.
These are called by the profile manager component when the user provides new profile information.

\htitle{Profile manager}
Users must be able to insert and edit their profile information.
Validity checks and DB updates are performed by this component.
The query service and the suggestion service APIs are used when data is to be updated.

\htitle{Enrollment manager}
This component manages all the selection process phases, from the student application request to the start of the internship.
It also handles the questionnaires that companies send to students to fill in.

\htitle{Internship manager}
This component handles the operations that the internship may allow or require when it is in the ongoing status.
Along initializing and interrupting the internship, it permits users to visualize its annex information.

\htitle{Complaint manager}
This component allows students and companies to send complaints regarding an ongoing internship, hence allowing the university to visualize and handle them.
Since complaints must have a valid reference to an ongoing internship, the internship manager component APIs are here used.

\htitle{Feedback manager}
When an internship ends, both parties are requested to fill in a feedback form.
This component handles this operation, by sending, receiving and acting accordingly to the feedback forms content.
Since feedback forms must have a valid reference to an internship that has concluded, the internship manager component APIs are here used.

\section{Deployment view}

The following diagram shows the deployment view of the system.
It illustrates the distribution of the components on the different nodes, and how they communicate between each others.

The system is composed of four tiers, one for the client frontend and three for the server fullstack processes: the client tier, the web tier, the application tier and the data tier.
The client tier corresponds to the web browser, which is required by the user to access the application.
The web tier represents the web server, which is used to handle incoming user requests and to return web pages and their content.
The application tier corresponds to the application server, that is used to execute the business logic and to communicate with the database.
The data tier is composed of the database, which is used to store all the data that the application server may require.

The email service is a set of external APIs used by the application to send emails to the users.

Moreover, since the platform will potentially need to manage a lot of concurrent users, the implementation of load balancers can help distribute the load among multiple servers.
This allows the application to be more scalable, since it eases the addition of other servers to handle an increasing load.
Those are placed between the client and the web server, and between the web server and the application server.

Lastly, to protect the application from external attacks, multiple firewalls are in use to filter the traffic.
In particular, those are placed between the client and the web server, between the web servers and the application server, and before the database.
This allows the application to execute in a more secure environment, since the firewall will filter the traffic before it reaches the designeted component.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\linewidth]{../../assets/deployment-diagrams/deployment-diagram.png}
\end{figure}

\section{Runtime view}

This section contains the sequence diagrams of the most important operations of the system.
The diagrams include the component described in the previous sections, and the external components that are involved in the operations.

\begin{enumerate}[label=\textbf{RV\arabic* -}]

\item \subsubsection{StudentSignsUp}
\item \subsubsection{CompanySignsUp}
\item \subsubsection{UserLogsIn}
\item \subsubsection{StudentUploadsCV}
\item \subsubsection{CompanyCreatesAdvertisement}
\item \subsubsection{StudentVisualizesAdvertisements}
\item \subsubsection{CompanyVisualizesCandidates}
\item \subsubsection{CompanyCreatesQuestionnaire}
\item \subsubsection{StudentFillsQuestionnaire}
\item \subsubsection{CompanyAcceptsStudentEnrollment}
\item \subsubsection{StudentVisualizesInternshipInformation}
\item \subsubsection{CompanyVisualizesInternshipsInformation}
\item \subsubsection{StudentSendsComplaint}
\item \subsubsection{CompanySendsComplaint}
\item \subsubsection{UniversityVisualizesComplaints}
\item \subsubsection{UniversityEndsInternship}
\item \subsubsection{InternshipExpires}
\item \subsubsection{ParticipantFillsFeedbackForm}

\end{enumerate}

\section{Component interfaces}

\section{Architectural styles and patterns}

\htitle{Three-tier architecture}
Since the S\&C platform is offered through the web, the client-server architecture is the most suitable for this kind of application.
In particular, a three-tier architecture comes handy when dividing the system into the three main logical layers: presentation (web server), business logic (application server), and data storage (database).
Each tier has its specific functions, ensuring separation of concerns and efficient management of the system.
It allows scalability, simplifies maintenance, and enhances control and security.

\htitle{REST}
The communication between the client and the server is based on the REST architectural style.
REST is stateless, meaning that the server does not need to store any information about the client session, allowing higher scalability.
Moreover, it provides a uniform interface to the client via the HTTP methods (GET, POST, PUT, DELETE).

\htitle{MVC}
The MVC pattern is used to separate the presentation layer from the business logic.
In particular, the model contains the definitions of all the elements of the application, the view is the browser interface component, and the controller comprehends all the other application server services and managers.
This pattern allows a more maintainable application, since changes in one layer do not affect other layers.

\section{Other design decisions}

\htitle{Scale out}
Using a scale out design, when implementing the software, can highly enhance availability, by avoiding the need of downtimes.
This design approach enables the system to expand its capacity to cope with an increasing demand, by adding more resources when needed.
Moreover, it can be more cost effective than upgrading individual components.
The scale out design also improves reliability, by providing redundant resources that can take over when other components fails.
Flexibility is also augmented, as resources can be fastly added or removed, as required.
Lastly, the scale out design improves the system performance, since workloads are processed in parallel rather than sequentially.

\htitle{Relational database}
Due to its effectiveness at storing structured data, a relational database was chosen for the system design.
It also enforces data integrity while providing fast query performance.
A relational DB is also able to handle large amounts of data, while supporting many concurrent users.

\htitle{Token-based authentication}
The authentication and authorization is implemented using a token-based process.
These tokens are sent to the users each time they log in, and they must be included within each request that requires authentication or authorization.

